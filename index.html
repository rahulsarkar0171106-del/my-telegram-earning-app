<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Ü‡¶∞‡ßç‡¶®‡¶ø‡¶Ç ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        /* ‡ßß. ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶è‡¶¨‡¶Ç ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶° */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
            background-color: #0d0d10 !important;
            color: #f0f0f0 !important;
            margin: 0 !important;
            padding: 20px !important;
            min-height: 100vh;
            box-sizing: border-box;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        /* ‡ß®. ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .balance-card {
            background: linear-gradient(135deg, #4f31c7, #2c1a85) !important; 
            padding: 25px !important;
            border-radius: 15px !important;
            text-align: center !important;
            margin-bottom: 25px !important;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5) !important;
        }

        .balance-card h2 {
            margin: 0 0 10px 0 !important;
            color: #c0c0c0 !important;
        }

        .balance-card #current-balance {
            font-size: 2.5em !important;
            color: #fce300 !important;
            font-weight: 900 !important;
            letter-spacing: 1px !important;
        }

        /* ‡ß©. ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ó‡ßç‡¶∞‡¶ø‡¶° ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .task-grid {
            display: grid !important;
            grid-template-columns: 1fr 1fr !important;
            gap: 15px !important;
            margin-bottom: 30px !important;
        }

        .task-card {
            background: #1a1a20 !important; 
            padding: 20px 15px !important;
            border-radius: 12px !important;
            text-align: center !important;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5) !important;
        }
        
        /* ‡ß™. ‡¶¨‡¶æ‡¶ü‡¶® ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡¶æ */
        .task-card button {
            background-color: #1a73e8 !important;
            color: white !important;
            border: none !important;
            padding: 10px 15px !important;
            border-radius: 25px !important; 
            margin-top: 15px !important;
            width: 100% !important;
            box-sizing: border-box !important;
        }

        /* ‡ß´. ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶® */
        .footer-nav button {
            width: 100% !important;
            padding: 18px !important;
            background-color: #e0399d !important;
            color: white !important;
            border-radius: 12px !important;
            font-size: 1.2em !important;
        }

        /* ‡ß¨. ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶≠‡¶ø‡¶â‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá */
        .ad-viewer-overlay {
            position: fixed !important;
            top: 0 !important; 
            left: 0 !important; 
            width: 100% !important;
            height: 100vh !important;
            z-index: 9999 !important; 
            background-color: #000000 !important;
            display: none; 
            flex-direction: column;
            justify-content: flex-start; 
        }

        .ad-header {
            width: 100%;
            padding: 15px;
            background-color: #2b2b2b;
            color: white;
            text-align: center;
            font-size: 1.1em;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            box-sizing: border-box !important;
        }

        #ad-frame {
            flex-grow: 1;
            width: 100%;
            height: 100%; 
            border: none;
        }
        
        #ad-done-button {
            width: 90%;
            margin: 20px auto;
            padding: 15px;
            background-color: #4CAF50; 
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="balance-card">
            <h2>‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏:</h2>
            <p id="current-balance">‡ß´‡ß¶.‡ß¶‡ß¶ Taka üí∞</p>
        </div>
        <div class="task-grid">
            <div class="task-card" id="ad-view-card">
                <h3>‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ</h3>
                <p id="ad-count">0 / 10</p>
                <button id="ad-button" onclick="startAdView()">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (‡ß´ ‡¶ü‡¶æ‡¶ï‡¶æ)</button> 
            </div>
            <div class="task-card" id="referral-card">
                <h3>‡¶Æ‡ßã‡¶ü ‡¶∞‡ßá‡¶´‡¶æ‡¶∞</h3>
                <p id="referral-count">0</p>
                <button onclick="shareReferral()">‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>
        <div class="footer-nav">
            <button onclick="startWithdrawal()">‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button> 
        </div>
    </div>
    
    <div id="ad-viewer" class="ad-viewer-overlay">
        <div class="ad-header">
            ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá... (<span id="countdown-timer">20</span>s)
        </div>
        <iframe id="ad-frame" src="" frameborder="0"></iframe> 
        <button id="ad-done-button" onclick="adFinished()" style="display:none;">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∂‡ßá‡¶∑ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶π‡ßã‡¶Æ‡ßá ‡¶´‡¶ø‡¶∞‡ßÅ‡¶®</button>
    </div>

    <script>
        // ‡¶°‡ßá‡¶ü‡¶æ ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶® (‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶Æ‡¶æ‡¶®)
        let userBalance = 50.00;
        let adsWatched = 0;
        let totalReferrals = 0; 
        const totalAds = 10;
        const rewardPerAd = 5.00; 
        const minimumWithdrawal = 500.00; 

        // DOM ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶∏
        let countdownInterval;
        const adViewer = document.getElementById('ad-viewer');
        const adFrame = document.getElementById('ad-frame');
        const adButton = document.getElementById('ad-button');
        const countdownTimer = document.getElementById('countdown-timer');
        const adDoneButton = document.getElementById('ad-done-button');
        const referralCountElement = document.getElementById('referral-count'); 

        // ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡ßß: CloudStorage ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ (Async)
        async function loadData() {
            if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.CloudStorage) {
                try {
                    const keys = ['userBalance', 'adsWatched'];
                    const data = await window.Telegram.WebApp.CloudStorage.getItems(keys);
                    
                    if (data['userBalance']) {
                        userBalance = parseFloat(data['userBalance']);
                    }
                    if (data['adsWatched']) {
                        adsWatched = parseInt(data['adsWatched']);
                    }
                } catch (error) {
                    console.error("CloudStorage ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ:", error);
                }
            } else {
                console.warn("Telegram CloudStorage ‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß ‡¶®‡¶Ø‡¶º, ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶π‡¶¨‡ßá ‡¶®‡¶æ‡•§");
            }
        }
        
        // ‚≠ê ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡ß®: ‡¶°‡ßá‡¶ü‡¶æ CloudStorage-‡¶è ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ (Async) - ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‚≠ê
        async function saveData() {
            if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.CloudStorage) {
                try {
                    await window.Telegram.WebApp.CloudStorage.setItems({
                        'userBalance': userBalance.toFixed(2).toString(),
                        'adsWatched': adsWatched.toString()
                    });
                    // ‚≠ê ‡¶∏‡¶´‡¶≤ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‚≠ê
                    window.Telegram.WebApp.showAlert(`‚úÖ ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶°‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: ${userBalance.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ‡•§`); 
                } catch (error) {
                    // ‚≠ê ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‚≠ê
                    window.Telegram.WebApp.showAlert("‚ùå ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ü ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
                    console.error("CloudStorage ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ:", error);
                }
            }
        }


        // ‡¶Ø‡¶ñ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá (Async)
        window.onload = async function() {
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.ready();
                window.Telegram.WebApp.MainButton.hide();
                
                if (window.Telegram.WebApp.colorScheme === 'dark') {
                    document.body.style.backgroundColor = '#0d0d10';
                    document.body.style.color = '#f0f0f0';
                }
            }
            
            await loadData(); 
            
            updateUI();
            showWelcomeNotice(); 
        };
        
        // UI (User Interface) ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function updateUI() {
            document.getElementById('current-balance').innerText = userBalance.toFixed(2) + ' Taka üí∞';
            document.getElementById('ad-count').innerText = `${adsWatched} / ${totalAds}`;
            referralCountElement.innerText = totalReferrals; 
            
            if (adsWatched >= totalAds) {
                adButton.disabled = true;
                adButton.innerText = '‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∂‡ßá‡¶∑';
            } else {
                adButton.disabled = false;
                adButton.innerText = '‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (‡ß´ ‡¶ü‡¶æ‡¶ï‡¶æ)';
            }
        }

        // ... (‡¶¨‡¶æ‡¶ï‡¶ø ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) ...
        function showWelcomeNotice() {
            const noticeTitle = '‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ! üî•';
            const noticeMessage = 
                '‡¶Ü‡¶∏‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ‡ßÅ ‡¶Ü‡¶≤‡¶æ‡¶á‡¶ï‡ßÅ‡¶Æ, ‡¶∏‡¶§‡¶§‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶õ‡¶ø‡•§ ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ ‡¶Æ‡ßá‡¶®‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶≤‡ßá ‡ßß‡ß¶‡ß¶% ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡¶á‡¶®‡¶∂‡¶æ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π! üî•\n\n' +
                '‚Ä¢ ‡¶ú‡¶Ø‡¶º‡ßá‡¶®‡¶ø‡¶Ç ‡¶¨‡ßã‡¶®‡¶æ‡¶∏: ‡ß´‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ\n' +
                '‚Ä¢ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá: ‡ß©‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ\n' +
                '‚Ä¢ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®‡ßá: ‡ß´ ‡¶ü‡¶æ‡¶ï‡¶æ\n' + 
                '‚Ä¢ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡ßß‡ß¶ ‡¶ü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡ßÅ‡¶Ø‡ßã‡¶ó\n' +
                '\n' +
                '‚ö°Ô∏è ‡¶è‡¶á ‡¶∏‡¶æ‡¶á‡¶ü‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶á‡¶®‡¶≠‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá ‡¶®‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶´‡ßç‡¶∞‡¶ø‡¶§‡ßá ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§ ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶‡•§';
            
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.showPopup({
                    title: noticeTitle,
                    message: noticeMessage,
                    buttons: [{ text: '‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø', id: 'ok' }]
                });
            } else {
                alert(noticeTitle + '\n\n' + noticeMessage);
            }
        }

        function startAdView() {
            if (adsWatched >= totalAds) {
                if (window.Telegram && window.Telegram.WebApp) {
                    window.Telegram.WebApp.showAlert('‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§! ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡ßß‡ß¶‡¶ü‡¶ø ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∂‡ßá‡¶∑‡•§');
                } else {
                    alert('‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§! ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡ßß‡ß¶‡¶ü‡¶ø ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∂‡ßá‡¶∑‡•§');
                }
                return;
            }
            
            const adURL = "https://www.effectivegatecpm.com/q7m07sggj?key=0febc73b4772d20c71652935f8240078";
            
            adViewer.style.display = 'flex'; 
            adViewer.style.width = '100vw'; 
            adViewer.style.height = '100vh';
            
            adFrame.src = adURL;
            adButton.disabled = true; 

            let timeRemaining = 20; 
            countdownTimer.innerText = timeRemaining;
            adDoneButton.style.display = 'none';

            countdownInterval = setInterval(() => {
                timeRemaining--;
                countdownTimer.innerText = timeRemaining;

                if (timeRemaining <= 0) {
                    clearInterval(countdownInterval);
                    
                    rewardUser();
                    
                    adDoneButton.style.display = 'block'; 
                    
                    if (window.Telegram && window.Telegram.WebApp) {
                        window.Telegram.WebApp.showAlert(`‡¶∏‡¶´‡¶≤! ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏‡ßá ${rewardPerAd.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶è‡¶ñ‡¶® '‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∂‡ßá‡¶∑ ‡¶ï‡¶∞‡ßÅ‡¶®' ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`);
                    }
                }
            }, 1000);
        }

        function rewardUser() {
            adsWatched++;
            userBalance += rewardPerAd;
            
            saveData(); // ‡¶°‡ßá‡¶ü‡¶æ ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶° ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®
        }

        function adFinished() {
            adViewer.style.display = 'none';
            adViewer.style.width = ''; 
            adViewer.style.height = ''; 
            adFrame.src = ''; 
            updateUI(); 
            adButton.disabled = false; 
        }

        function startWithdrawal() {
            if (window.Telegram && window.Telegram.WebApp) {
                const tg = window.Telegram.WebApp;
                
                if (userBalance < minimumWithdrawal) {
                    tg.showAlert(`‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§! ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ${minimumWithdrawal.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: ${userBalance.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ‡•§`);
                    return;
                }

                tg.showPopup({
                    title: '‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßÅ‡¶≤‡ßÅ‡¶®',
                    message: `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: ${userBalance.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßÅ‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßã‡¶® ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø‡¶§‡ßá (‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂/‡¶®‡¶ó‡¶¶) ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶®‡¶ø‡¶§‡ßá ‡¶ö‡¶æ‡¶®, ‡¶§‡¶æ ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶ú‡¶æ‡¶®‡¶æ‡¶®‡•§`,
                    buttons: [
                        { text: '‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶¶‡¶ø‡¶®', id: 'request' },
                        { text: '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®', id: 'cancel', type: 'destructive' }
                    ]
                }, function(id) {
                    if (id === 'request') {
                        tg.showPopup({
                            title: '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø',
                            message: '‡¶Ü‡¶™‡¶®‡¶ø ‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶®‡¶æ ‡¶®‡¶ó‡¶¶, ‡¶ï‡ßã‡¶®‡¶ü‡¶ø‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶®‡¶ø‡¶§‡ßá ‡¶ö‡¶æ‡¶®?',
                            buttons: [
                                { text: '‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂', id: 'bKash' },
                                { text: '‡¶®‡¶ó‡¶¶', id: 'Nagad' }
                            ]
                        }, function(method_id) {
                            if (method_id === 'bKash' || method_id === 'Nagad') {
                                tg.showPopup({
                                    title: `${method_id} ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®`,
                                    message: `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ${method_id} ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡¶ü‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶§‡ßã‡¶≤‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®‡•§`,
                                    buttons: [{ text: '‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®', id: 'submit' }]
                                }, function(submit_id) {
                                    if (submit_id === 'submit') {
                                        tg.showAlert(`‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßã‡¶≤‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡ß®‡ß™ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡ßá‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡¶®‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø: ${method_id}`);
                                    }
                                });
                            }
                        });
                    }
                });
            } else {
                alert('‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶Ö‡¶™‡¶∂‡¶® ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶Æ‡¶ø‡¶®‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá‡•§');
            }
        }
        
        function shareReferral() {
            if (window.Telegram && window.Telegram.WebApp) {
                const userId = window.Telegram.WebApp.initDataUnsafe.user ? window.Telegram.WebApp.initDataUnsafe.user.id : 'demo_user';
                const botUsername = 'your_bot_username'; 
                const referralLink = `https://t.me/${botUsername}?start=ref_${userId}`;
                
                window.Telegram.WebApp.showPopup({
                    title: '‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®',
                    message: `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï: ${referralLink}\n‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßá ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®!`,
                    buttons: [{ text: '‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®', id: 'copy' }, { text: '‡¶¨‡¶®‡ßç‡¶ß', id: 'close' }]
                }, function(id) {
                    if (id === 'copy') {
                        navigator.clipboard.writeText(referralLink);
                        window.Telegram.WebApp.showAlert('‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                    }
                });
            } else {
                alert('‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶¨‡¶æ‡¶á‡¶∞‡ßá ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§');
            }
        }
    </script>
</body>
</html>
